<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rt2_ass2: scripts/go_to_point_action.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rt2_ass2
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Package for the final assignment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_53e6fa9553ac22a5646d2a2b2d7b97a1.html">scripts</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">go_to_point_action.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file will directly operate on the robot based on the goal received.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:affe1389e38557b69ee71adea85b846b2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#affe1389e38557b69ee71adea85b846b2">go_to_point_action.clbk_odom</a> (msg)</td></tr>
<tr class="memdesc:affe1389e38557b69ee71adea85b846b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The clbk_odom function.  <a href="go__to__point__action_8py.html#affe1389e38557b69ee71adea85b846b2">More...</a><br /></td></tr>
<tr class="separator:affe1389e38557b69ee71adea85b846b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7ad2629ed9ffbd5d9b7ca9c540d932a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#ab7ad2629ed9ffbd5d9b7ca9c540d932a">go_to_point_action.change_state</a> (state)</td></tr>
<tr class="memdesc:ab7ad2629ed9ffbd5d9b7ca9c540d932a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The change_state function.  <a href="go__to__point__action_8py.html#ab7ad2629ed9ffbd5d9b7ca9c540d932a">More...</a><br /></td></tr>
<tr class="separator:ab7ad2629ed9ffbd5d9b7ca9c540d932a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bca87c6d45ca63d3152a4e8def72e2a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#a0bca87c6d45ca63d3152a4e8def72e2a">go_to_point_action.normalize_angle</a> (angle)</td></tr>
<tr class="memdesc:a0bca87c6d45ca63d3152a4e8def72e2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The normalize_angle function.  <a href="go__to__point__action_8py.html#a0bca87c6d45ca63d3152a4e8def72e2a">More...</a><br /></td></tr>
<tr class="separator:a0bca87c6d45ca63d3152a4e8def72e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e7fef09d30f59bb91061f4b91f87e6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#a18e7fef09d30f59bb91061f4b91f87e6">go_to_point_action.fix_yaw</a> (des_pos)</td></tr>
<tr class="memdesc:a18e7fef09d30f59bb91061f4b91f87e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The fix_yah function.  <a href="go__to__point__action_8py.html#a18e7fef09d30f59bb91061f4b91f87e6">More...</a><br /></td></tr>
<tr class="separator:a18e7fef09d30f59bb91061f4b91f87e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c35034eab524fbff7d05d80fd65ede4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#a7c35034eab524fbff7d05d80fd65ede4">go_to_point_action.go_straight_ahead</a> (des_pos)</td></tr>
<tr class="memdesc:a7c35034eab524fbff7d05d80fd65ede4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The go_straight_ahead function.  <a href="go__to__point__action_8py.html#a7c35034eab524fbff7d05d80fd65ede4">More...</a><br /></td></tr>
<tr class="separator:a7c35034eab524fbff7d05d80fd65ede4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a068188471dd5fc0ed3ea371e3a32338a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#a068188471dd5fc0ed3ea371e3a32338a">go_to_point_action.fix_final_yaw</a> (des_yaw)</td></tr>
<tr class="memdesc:a068188471dd5fc0ed3ea371e3a32338a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The fix_final_yah function.  <a href="go__to__point__action_8py.html#a068188471dd5fc0ed3ea371e3a32338a">More...</a><br /></td></tr>
<tr class="separator:a068188471dd5fc0ed3ea371e3a32338a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fec1cd57aebd720828b5bab962048db"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#a9fec1cd57aebd720828b5bab962048db">go_to_point_action.done</a> ()</td></tr>
<tr class="memdesc:a9fec1cd57aebd720828b5bab962048db"><td class="mdescLeft">&#160;</td><td class="mdescRight">The done function.  <a href="go__to__point__action_8py.html#a9fec1cd57aebd720828b5bab962048db">More...</a><br /></td></tr>
<tr class="separator:a9fec1cd57aebd720828b5bab962048db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3bc8cf3239eaa0def69f3a87a98976c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#ab3bc8cf3239eaa0def69f3a87a98976c">go_to_point_action.planning</a> (goal)</td></tr>
<tr class="memdesc:ab3bc8cf3239eaa0def69f3a87a98976c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The planning function.  <a href="go__to__point__action_8py.html#ab3bc8cf3239eaa0def69f3a87a98976c">More...</a><br /></td></tr>
<tr class="separator:ab3bc8cf3239eaa0def69f3a87a98976c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33cfc08b34e07f53ddda67d2ab551ba1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="go__to__point__action_8py.html#a33cfc08b34e07f53ddda67d2ab551ba1">go_to_point_action.main</a> ()</td></tr>
<tr class="memdesc:a33cfc08b34e07f53ddda67d2ab551ba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Documentation for the main function.  <a href="go__to__point__action_8py.html#a33cfc08b34e07f53ddda67d2ab551ba1">More...</a><br /></td></tr>
<tr class="separator:a33cfc08b34e07f53ddda67d2ab551ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afd83e8a50982500cb1aea028fa6bd8fb"><td class="memItemLeft" align="right" valign="top"><a id="afd83e8a50982500cb1aea028fa6bd8fb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.position_</b> = Point()</td></tr>
<tr class="separator:afd83e8a50982500cb1aea028fa6bd8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e81c61a8a01745a08f175577455bcb4"><td class="memItemLeft" align="right" valign="top"><a id="a7e81c61a8a01745a08f175577455bcb4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.yaw_</b> = 0</td></tr>
<tr class="separator:a7e81c61a8a01745a08f175577455bcb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513d83133bce80caeaf1f02289d6c12b"><td class="memItemLeft" align="right" valign="top"><a id="a513d83133bce80caeaf1f02289d6c12b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.state_</b> = 0</td></tr>
<tr class="separator:a513d83133bce80caeaf1f02289d6c12b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d09e37099932459bc3e4146007cce86"><td class="memItemLeft" align="right" valign="top"><a id="a6d09e37099932459bc3e4146007cce86"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.pub_</b> = None</td></tr>
<tr class="separator:a6d09e37099932459bc3e4146007cce86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d0c1c8c5e359fcd5f1901e25a86a2d"><td class="memItemLeft" align="right" valign="top"><a id="a99d0c1c8c5e359fcd5f1901e25a86a2d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.yaw_precision_</b> = math.pi / 9</td></tr>
<tr class="separator:a99d0c1c8c5e359fcd5f1901e25a86a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaede468f4753c2c476474b35b81754c"><td class="memItemLeft" align="right" valign="top"><a id="aeaede468f4753c2c476474b35b81754c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.yaw_precision_2_</b> = math.pi / 90</td></tr>
<tr class="separator:aeaede468f4753c2c476474b35b81754c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a3cd0c013f3c1712758e04b4bc91f4"><td class="memItemLeft" align="right" valign="top"><a id="a01a3cd0c013f3c1712758e04b4bc91f4"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.dist_precision_</b> = 0.1</td></tr>
<tr class="separator:a01a3cd0c013f3c1712758e04b4bc91f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a9de26fa4f88312f9cc4a8ecedb369"><td class="memItemLeft" align="right" valign="top"><a id="a67a9de26fa4f88312f9cc4a8ecedb369"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.kp_a</b> = -3.0</td></tr>
<tr class="separator:a67a9de26fa4f88312f9cc4a8ecedb369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd565e807f177f678d6a12d504d01e60"><td class="memItemLeft" align="right" valign="top"><a id="acd565e807f177f678d6a12d504d01e60"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.kp_d</b> = 0.2</td></tr>
<tr class="separator:acd565e807f177f678d6a12d504d01e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb07d74a9d8087eb04da488c77c118c"><td class="memItemLeft" align="right" valign="top"><a id="a9cb07d74a9d8087eb04da488c77c118c"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.ub_a</b> = 0.6</td></tr>
<tr class="separator:a9cb07d74a9d8087eb04da488c77c118c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a156fcdad5d5c28042b46d45d323a9fac"><td class="memItemLeft" align="right" valign="top"><a id="a156fcdad5d5c28042b46d45d323a9fac"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.lb_a</b> = -0.5</td></tr>
<tr class="separator:a156fcdad5d5c28042b46d45d323a9fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a9d1a5cc9bd5e985d6ad5247ac985d"><td class="memItemLeft" align="right" valign="top"><a id="a05a9d1a5cc9bd5e985d6ad5247ac985d"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.ub_d</b> = 0.6</td></tr>
<tr class="separator:a05a9d1a5cc9bd5e985d6ad5247ac985d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3994b1577d1a499ce8c7352036ee6486"><td class="memItemLeft" align="right" valign="top"><a id="a3994b1577d1a499ce8c7352036ee6486"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>go_to_point_action.act_s</b> = None</td></tr>
<tr class="separator:a3994b1577d1a499ce8c7352036ee6486"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file will directly operate on the robot based on the goal received. </p>
<dl class="section author"><dt>Author</dt><dd>Federico Zecchi </dd></dl>
<dl class="section date"><dt>Date</dt><dd>18/06/21</dd></dl>
<p>Action Server:<br />
 Â°/go_to_point_action </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="file_ab7ad2629ed9ffbd5d9b7ca9c540d932a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_ab7ad2629ed9ffbd5d9b7ca9c540d932a">&#9670;&nbsp;</a></span>change_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.change_state </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The change_state function. </p>
<p>It controls the state of the robot, allowing to translate or to rotate when needed. </p>

</div>
</div>
<a id="file_affe1389e38557b69ee71adea85b846b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_affe1389e38557b69ee71adea85b846b2">&#9670;&nbsp;</a></span>clbk_odom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.clbk_odom </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The clbk_odom function. </p>
<p>This Callback is for the subscriber to topic odom it keeps track of the robot pose.</p>
<ul>
<li>msg the message carrying the information </li>
</ul>

</div>
</div>
<a id="file_a9fec1cd57aebd720828b5bab962048db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a9fec1cd57aebd720828b5bab962048db">&#9670;&nbsp;</a></span>done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The done function. </p>
<p>It stops the robot meaning that the pose has been reached </p>

</div>
</div>
<a id="file_a068188471dd5fc0ed3ea371e3a32338a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a068188471dd5fc0ed3ea371e3a32338a">&#9670;&nbsp;</a></span>fix_final_yaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.fix_final_yaw </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>des_yaw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The fix_final_yah function. </p>
<p>It allows the robot to fix it's yah and reach the final state(done) if the conditions are met </p>

</div>
</div>
<a id="file_a18e7fef09d30f59bb91061f4b91f87e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a18e7fef09d30f59bb91061f4b91f87e6">&#9670;&nbsp;</a></span>fix_yaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.fix_yaw </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>des_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The fix_yah function. </p>
<p>It rotates the robot to fix it's yah in the desired direction by publishing a twist message on /cmd_vel </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">des_pos</td><td>from this desired position computes the desired yah </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="file_a7c35034eab524fbff7d05d80fd65ede4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a7c35034eab524fbff7d05d80fd65ede4">&#9670;&nbsp;</a></span>go_straight_ahead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.go_straight_ahead </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>des_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The go_straight_ahead function. </p>
<p>It allows the robot to go straight or to change it's state if needed </p>

</div>
</div>
<a id="file_a33cfc08b34e07f53ddda67d2ab551ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a33cfc08b34e07f53ddda67d2ab551ba1">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Documentation for the main function. </p>
<p>More details.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="file_a0bca87c6d45ca63d3152a4e8def72e2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_a0bca87c6d45ca63d3152a4e8def72e2a">&#9670;&nbsp;</a></span>normalize_angle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.normalize_angle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The normalize_angle function. </p>
<p>It performs normalazation of an angle . </p>

</div>
</div>
<a id="file_ab3bc8cf3239eaa0def69f3a87a98976c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#file_ab3bc8cf3239eaa0def69f3a87a98976c">&#9670;&nbsp;</a></span>planning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def go_to_point_action.planning </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>goal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The planning function. </p>
<p>It is the action callback. The script will remain inside this function, due to the while loop. Here it will wait for new goal, ask the robot to reach them and delete goal if required. The state will also be updated </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">goal</td><td>It is the goal required in the action server </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
